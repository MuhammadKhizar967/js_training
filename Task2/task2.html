<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>

<body>
	<input id="searchedText" type="text">
	<button onclick="findIt()">Search</button>
	<input id="totalSearches" style="border: none;">


	<p id="text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
	tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
	quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
	consequat.</p>
</body>

<script type="text/javascript">

	function findIt(){
		var searched = document.getElementById("searchedText").value;
		
		if (searched){
			var entireText = document.getElementById("text").innerHTML;
			let count = 0;
			var searchedExp = new RegExp(searched, "gi");
			var matches = entireText.match(searchedExp);
			// alert(matches);
			// var matchCount = matches.length;
			// document.getElementById("totalSearches").value = matchCount;

			// for (var i=0; i<matchCount;){
			// 	var tempText = entireText.replace(searchedExp, "<span style='background-color:yellow'>" + matches[i] + "</span>");
			// 	document.getElementById("text").innerHTML = tempText;
			// 	i++;
			// }
			
			document.getElementById("text").innerHTML = entireText.replace(searchedExp, function(match){
				++count;
				document.getElementById("totalSearches").value = count;
				return "<span style='background-color:yellow'>" + match + "</span>";
			})
	
		}
	}


</script>
</html>